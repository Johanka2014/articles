<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastering English Articles: A, An, and The</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
            color: #333;
        }
        .card-container {
            perspective: 1000px;
        }
        .card {
            transition: transform 0.6s, opacity 0.6s;
            backface-visibility: hidden;
        }
        .slide-box {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(4px);
            border-radius: 1rem; /* rounded-2xl */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .slide-hidden {
            transform: translateX(100%) rotateY(-20deg);
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
        }
        .slide-hidden-left {
            transform: translateX(-100%) rotateY(20deg);
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
        }
        .slide-active {
            transform: translateX(0) rotateY(0);
            opacity: 1;
            position: relative;
        }
        .quiz-input {
            border-bottom: 2px solid #ccc;
            background-color: transparent;
            text-align: center;
            width: 3rem;
        }
        .quiz-input:focus {
            outline: none;
            border-bottom: 2px solid #3f2b96;
        }
        .correct {
            border-bottom: 2px solid #4ade80;
        }
        .incorrect {
            border-bottom: 2px solid #f87171;
        }
        /* Styles for the circle quiz */
        .choice-group .choice {
            cursor: pointer;
            padding: 2px 6px;
            border-radius: 9999px;
            transition: background-color 0.2s, color 0.2s;
            border: 1px solid transparent;
        }
        .choice-group .choice.selected {
            background-color: #4f46e5;
            color: white;
            border-color: #3730a3;
        }
        .choice-group .choice.correct-answer {
             background-color: #22c55e;
             color: white;
        }
        .choice-group .choice.incorrect-answer {
            background-color: #ef4444;
            color: white;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-5xl mx-auto">
        <!-- Main Content -->
        <main id="presentation-container" class="card-container relative overflow-hidden min-h-[650px] flex items-center">

            <!-- Slide 1: Title -->
            <div id="slide-1" class="card slide-active w-full p-6 md:p-12">
                <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12">
                    <!-- Image Column -->
                    <div class="md:w-1/2">
                        <img src="https://johanka2014.github.io/articles/articles_image.png" alt="Illustration showing 'a', 'an', and 'the' with examples" class="rounded-lg shadow-xl w-full h-auto">
                    </div>
                    <!-- Text Column -->
                    <div class="md:w-1/2 text-center md:text-left">
                        <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Mastering English Articles</h1>
                        <p class="text-2xl md:text-3xl text-indigo-600 mt-2">A, An, and The</p>
                        <div class="mt-8 text-lg text-gray-700 space-y-3">
                            <p><strong class="text-indigo-700">Why Articles Matter:</strong> Essential for clarity and natural English communication.</p>
                            <p><strong class="text-indigo-700">Target Audience:</strong> Intermediate to advanced (B1-C1) English learners aiming for precision.</p>
                            <p><strong class="text-indigo-700">Lesson Goal:</strong> Identify and correct frequent errors in article usage, enhancing fluency.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2: The Fundamentals -->
            <div id="slide-2" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">The Fundamentals: When to Use 'A/An' and 'The'</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-blue-50 p-6 rounded-lg">
                        <h3 class="text-2xl font-bold text-blue-700">'A/An': Indefinite Article</h3>
                        <ul class="mt-4 list-disc list-inside space-y-2 text-gray-700">
                            <li>Used for singular, countable nouns when first mentioned or generic (e.g., a book, an apple).</li>
                            <li>Choice based on the <strong class="font-semibold">sound</strong> of the next word (e.g., an hour, a university).</li>
                            <li>Indicates "one of many."</li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-6 rounded-lg">
                        <h3 class="text-2xl font-bold text-purple-700">'The': Definite Article</h3>
                        <ul class="mt-4 list-disc list-inside space-y-2 text-gray-700">
                            <li>Used for specific or already-mentioned nouns (e.g., the book I read, the sun).</li>
                            <li>Applies to singular, plural, and uncountable nouns.</li>
                            <li>Indicates "this specific one."</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Slide 3: Common Pitfalls with 'A/An' -->
            <div id="slide-3" class="card slide-hidden w-full slide-box p-6 md:p-12">
                 <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Common Pitfalls with 'A/An'</h2>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-base">
                     <div class="p-4 bg-red-50 rounded-lg flex flex-col">
                         <p class="font-bold text-red-700 mb-2">Mistake 1: Uncountable Nouns</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> a furniture, an advice.</p>
                         <p><span class="text-green-600">Correct:</span> some furniture, some advice.</p>
                     </div>
                     <div class="p-4 bg-red-50 rounded-lg flex flex-col">
                         <p class="font-bold text-red-700 mb-2">Mistake 2: Plural Nouns</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> a cats, an interesting books.</p>
                         <p><span class="text-green-600">Correct:</span> cats, some interesting books.</p>
                     </div>
                      <div class="p-4 bg-red-50 rounded-lg flex flex-col">
                         <p class="font-bold text-red-700 mb-2">Mistake 3: 'A' vs 'An' Usage</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> a hour, an unique idea.</p>
                         <p><span class="text-green-600">Correct:</span> an hour, a unique idea.</p>
                     </div>
                 </div>
            </div>

            <!-- Slide 4: Common Pitfalls with 'The' -->
            <div id="slide-4" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Common Pitfalls with 'The'</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-md">
                     <div class="p-4 bg-red-50 rounded-lg">
                         <p class="font-bold text-red-700">Mistake 1: General Nouns</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> The life is short.</p>
                         <p><span class="text-green-600">Correct:</span> Life is short.</p>
                     </div>
                     <div class="p-4 bg-red-50 rounded-lg">
                         <p class="font-bold text-red-700">Mistake 2: Unique Items</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> Sun rises in east.</p>
                         <p><span class="text-green-600">Correct:</span> The sun rises in the east.</p>
                     </div>
                     <div class="p-4 bg-red-50 rounded-lg">
                         <p class="font-bold text-red-700">Mistake 3: Most Proper Nouns</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> the Mount Everest.</p>
                         <p><span class="text-green-600">Correct:</span> Mount Everest.</p>
                     </div>
                     <div class="p-4 bg-red-50 rounded-lg">
                         <p class="font-bold text-red-700">Mistake 4: Geographic Features</p>
                         <p><span class="text-red-500 line-through">Incorrect:</span> Pacific Ocean.</p>
                         <p><span class="text-green-600">Correct:</span> The Pacific Ocean.</p>
                     </div>
                 </div>
            </div>

            <!-- Slide 5: Interactive Quiz -->
            <div id="slide-5" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Interactive Quiz: Fill the Gaps</h2>
                <div id="interactive-quiz-exercise" class="text-lg space-y-3 bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-sm">
                    <ol class="list-decimal list-inside space-y-4">
                        <li>We enjoyed our holiday. <input type="text" data-answer="The" class="quiz-input"> hotel was very nice.</li>
                        <li>'Can I ask <input type="text" data-answer="a" class="quiz-input"> question?' 'Of course. What do you want to ask?'</li>
                        <li>You look very tired. You need <input type="text" data-answer="a" class="quiz-input"> holiday.</li>
                        <li>'Where's Tom?' 'He's in <input type="text" data-answer="the" class="quiz-input"> bathroom.'</li>
                        <li>Jane is <input type="text" data-answer="an" class="quiz-input"> interesting person. You must meet her.</li>
                        <li>A: Excuse me, can you tell me how to get to <input type="text" data-answer="the" class="quiz-input"> city centre? <br>B: Yes, go straight on and take <input type="text" data-answer="the" class="quiz-input"> next turning left.</li>
                        <li>A: Shall we go out for <input type="text" data-answer="a" class="quiz-input"> meal this evening? <br>B: Yes, that's <input type="text" data-answer="a" class="quiz-input"> good idea.</li>
                        <li>It's <input type="text" data-answer="a" class="quiz-input"> nice morning. Let's go for <input type="text" data-answer="a" class="quiz-input"> walk.</li>
                        <li>Amanda is <input type="text" data-answer="a" class="quiz-input"> student. When she finishes her studies, she wants to be <input type="text" data-answer="a" class="quiz-input"> journalist. She lives with two friends in <input type="text" data-answer="a" class="quiz-input"> flat near <input type="text" data-answer="the" class="quiz-input"> college where she is studying. <input type="text" data-answer="The" class="quiz-input"> flat is small but she likes it.</li>
                        <li>Peter and Mary have got two children, <input type="text" data-answer="a" class="quiz-input"> boy and <input type="text" data-answer="a" class="quiz-input"> girl. <input type="text" data-answer="The" class="quiz-input"> boy is seven years old and <input type="text" data-answer="the" class="quiz-input"> girl is three. Peter works in <input type="text" data-answer="a" class="quiz-input"> factory. Mary hasn't got <input type="text" data-answer="a" class="quiz-input"> job at the moment.</li>
                    </ol>
                </div>
                <div class="text-center mt-6">
                    <button id="check-quiz-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Check Answers</button>
                </div>
                <div id="quiz-feedback" class="text-center mt-4 font-semibold"></div>
            </div>

            <!-- Slide 6: Circle the Answer Quiz -->
            <div id="slide-6" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Practice: Circle the Correct Answer</h2>
                <div id="circle-quiz-exercise" class="text-lg space-y-3 bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-sm">
                    <ol class="list-decimal list-inside space-y-3">
                        <li>Did you lock <span class="choice-group"><span class="choice">door</span> / <span class="choice" data-correct="true">the door</span></span> when you left <span class="choice-group"><span class="choice">a house</span> / <span class="choice" data-correct="true">the house</span></span>?</li>
                        <li>My brother is married to <span class="choice-group"><span class="choice">Russian</span> / <span class="choice" data-correct="true">a Russian</span></span>. She's <span class="choice-group"><span class="choice">lawyer</span> / <span class="choice" data-correct="true">a lawyer</span></span>.</li>
                        <li>We go to <span class="choice-group"><span class="choice">theatre</span> / <span class="choice" data-correct="true">the theatre</span></span> about once <span class="choice-group"><span class="choice" data-correct="true">a month</span> / <span class="choice">the month</span></span>.</li>
                        <li>What <span class="choice-group"><span class="choice">beautiful</span> / <span class="choice" data-correct="true">a beautiful</span></span> day! Let's have breakfast on <span class="choice-group"><span class="choice">a terrace</span> / <span class="choice" data-correct="true">the terrace</span></span>.</li>
                        <li>I love <span class="choice-group"><span class="choice" data-correct="true">classical music</span> / <span class="choice">the classical music</span></span> and <span class="choice-group"><span class="choice" data-correct="true">Italian food</span> / <span class="choice">the Italian food</span></span>.</li>
                        <li>Who is <span class="choice-group"><span class="choice">a girl</span> / <span class="choice" data-correct="true">the girl</span></span> by <span class="choice-group"><span class="choice">a window</span> / <span class="choice" data-correct="true">the window</span></span>?</li>
                        <li>I leave <span class="choice-group"><span class="choice" data-correct="true">home</span> / <span class="choice">the home</span></span> at 8.00 and get to <span class="choice-group"><span class="choice" data-correct="true">work</span> / <span class="choice">the work</span></span> at 9.00.</li>
                        <li><span class="choice-group"><span class="choice" data-correct="true">Men</span> / <span class="choice">The men</span></span> aren't normally as sensitive as <span class="choice-group"><span class="choice" data-correct="true">women</span> / <span class="choice">the women</span></span>.</li>
                        <li>We usually have <span class="choice-group"><span class="choice" data-correct="true">dinner</span> / <span class="choice">the dinner</span></span> at 8.00 and go to <span class="choice-group"><span class="choice" data-correct="true">bed</span> / <span class="choice">the bed</span></span> at about 11.30.</li>
                        <li>She has <span class="choice-group"><span class="choice" data-correct="true">a lovely face</span> / <span class="choice">the lovely face</span></span> and <span class="choice-group"><span class="choice">the attractive eyes</span> / <span class="choice" data-correct="true">attractive eyes</span></span>.</li>
                    </ol>
                </div>
                 <div class="text-center mt-6">
                    <button id="check-circle-quiz-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Check Answers</button>
                </div>
                <div id="circle-quiz-feedback" class="text-center mt-4 font-semibold"></div>
            </div>

            <!-- Slide 7: Reading Practice -->
            <div id="slide-7" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Reading Practice: Article Correction</h2>
                <p class="text-center mb-8">Read the text and correct the article mistakes. Type the correct article in the box.</p>
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2 w-full mt-8 md:mt-0">
                        <img src="https://johanka2014.github.io/articles/bank_robber.png" alt="An illustration of a bank robber." class="rounded-lg shadow-xl w-full h-auto">
                    </div>
                    <div class="md:w-1/2 w-full">
                        <div id="reading-exercise" class="text-lg leading-relaxed bg-gray-50 p-6 rounded-lg border border-gray-300 shadow-md">
                            <p>
                                Yesterday, police arrested <span class="correction-wrapper"><input type="text" data-answer="a" class="quiz-input"></span> man in connection with 
                                <span class="correction-wrapper"><input type="text" data-answer="a" class="quiz-input"></span> robbery. <span class="correction-wrapper"><input type="text" data-answer="The" class="quiz-input"></span> man was caught near 
                                <span class="correction-wrapper"><input type="text" data-answer="the" class="quiz-input"></span> bank. He had <span class="correction-wrapper"><input type="text" data-answer="a" class="quiz-input"></span> large bag with him. Local residents expressed concern about 
                                crime in <span class="correction-wrapper"><input type="text" data-answer="the" class="quiz-input"></span> area.
                            </p>
                        </div>
                        <div class="text-center mt-6">
                            <button id="check-reading-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Check Answers</button>
                        </div>
                         <div id="reading-feedback" class="text-center mt-4 font-semibold"></div>
                    </div>
                </div>
            </div>

            <!-- Slide 8: Listening Practice -->
            <div id="slide-8" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-2 text-gray-800">Listening Practice: Fill the Gaps</h2>
                <p class="text-center mb-8">Imagine you are listening to a dialogue. Fill in the blanks with 'a', 'an', or 'the'.</p>
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2 w-full">
                        <div id="listening-exercise" class="text-lg space-y-4 bg-gray-50 p-6 rounded-lg border border-gray-300 shadow-md">
                            <p>"I'm planning <input type="text" data-answer="a" class="quiz-input"> trip to Edinburgh next month."</p>
                            <p>"Have you found <input type="text" data-answer="a" class="quiz-input"> good hotel yet?"</p>
                            <p>"I prefer staying in <input type="text" data-answer="X" placeholder="X" class="quiz-input"> small independent hotels, not <input type="text" data-answer="the" class="quiz-input"> big chains."</p>
                            <p>"We visited <input type="text" data-answer="the" class="quiz-input"> National Museum of Scotland last time."</p>
                            <p>"It's <input type="text" data-answer="an" class="quiz-input"> amazing city for history lovers."</p>
                        </div>
                         <div class="text-center mt-6">
                            <button id="check-listening-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Check Answers</button>
                        </div>
                        <div id="listening-feedback" class="text-center mt-4 font-semibold"></div>
                        <p class="text-center text-sm mt-2 text-gray-600">(Use 'X' for no article)</p>
                    </div>
                    <div class="md:w-1/2 w-full mt-8 md:mt-0">
                        <img src="https://johanka2014.github.io/articles/studying_with_headphones.png" alt="A person studying with headphones on." class="rounded-lg shadow-xl w-full h-auto">
                    </div>
                </div>
            </div>

            <!-- Slide 9: Free Practice (Task 1) -->
            <div id="slide-9" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Free Practice: Describe an Experience</h2>
                <div class="flex flex-col md:flex-row items-center gap-8">
                     <div class="md:w-1/2 w-full">
                        <img src="https://johanka2014.github.io/articles/concert.png" alt="A crowd at a music concert." class="rounded-lg shadow-xl w-full h-auto">
                    </div>
                    <div class="md:w-1/2 w-full bg-blue-50 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-blue-700">Task 1: Describe a Recent Experience</h3>
                        <p class="mt-2 text-gray-700">Write 5-7 sentences about an interesting thing you did recently. Pay close attention to article use.</p>
                        <textarea class="mt-4 w-full p-2 border rounded-lg h-40" placeholder="e.g., I went to a fantastic concert last weekend. The concert was held in a huge stadium..."></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Slide 10: Free Practice (Task 2) -->
            <div id="slide-10" class="card slide-hidden w-full slide-box p-6 md:p-12">
                 <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Free Practice: Debate a Topic</h2>
                 <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2 w-full bg-purple-50 p-6 rounded-lg h-full flex flex-col">
                        <h3 class="text-xl font-bold text-purple-700">Task 2: Debate a Topic</h3>
                         <p class="mt-2 text-gray-700">Write a short paragraph on one of these topics:</p>
                        <ul class="list-disc list-inside mt-2 text-gray-600">
                            <li>What is the best way to learn a new language?</li>
                            <li>Should governments focus more on environmental issues or economic growth?</li>
                        </ul>
                        <textarea class="mt-4 w-full p-2 border rounded-lg h-40 flex-grow" placeholder="e.g., I believe the best way to learn a new language is..."></textarea>
                    </div>
                    <div class="md:w-1/2 w-full">
                        <img src="https://johanka2014.github.io/articles/debate.png" alt="Two people debating." class="rounded-lg shadow-xl w-full h-auto">
                    </div>
                </div>
            </div>

            <!-- Slide 11: Conclusion -->
            <div id="slide-11" class="card slide-hidden w-full slide-box p-6 md:p-12">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-800">Conclusion & Next Steps</h2>
                <div class="text-lg space-y-4">
                    <p class="p-4 bg-green-50 rounded-lg"><strong class="text-green-700">Key Takeaway:</strong> Article usage is nuanced; consistency and context are paramount.</p>
                    <p class="p-4 bg-blue-50 rounded-lg"><strong class="text-blue-700">Remember:</strong> 'A/An' introduces, 'The' specifies. Zero article for general plural/uncountable nouns.</p>
                    <div class="p-4 bg-yellow-50 rounded-lg">
                        <h3 class="font-bold text-yellow-800">Continuous Improvement:</h3>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700">
                            <li>Read widely in English, paying attention to how articles are used.</li>
                            <li>Practise regularly through speaking and writing.</li>
                            <li>Utilise online grammar checkers for initial error identification.</li>
                            <li>Review common mistake lists periodically.</li>
                        </ul>
                    </div>
                </div>
                 <div class="mt-8 text-center">
                    <p class="text-xl font-semibold text-indigo-800">Well done! You've completed the lesson.</p>
                </div>
            </div>

        </main>

        <!-- Navigation -->
        <div class="flex justify-between items-center mt-6">
            <button id="prev-btn" class="bg-white/80 text-indigo-600 font-bold py-3 px-6 rounded-lg hover:bg-white transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                &larr; Previous
            </button>
            <div id="slide-counter" class="text-white font-semibold">1 / 11</div>
            <button id="next-btn" class="bg-white/80 text-indigo-600 font-bold py-3 px-6 rounded-lg hover:bg-white transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                Next &rarr;
            </button>
        </div>

    </div>

    <script>
        // Wrap the entire script in an IIFE to create a private scope and avoid polluting the global namespace.
        (function() {
            document.addEventListener('DOMContentLoaded', () => {
                // --- Variable Declarations ---
                const slides = document.querySelectorAll('.card');
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const slideCounter = document.getElementById('slide-counter');
                let currentSlide = 0;
                const totalSlides = slides.length;

                // --- Event Handlers for Quizzes ---
                const readingCheckHandler = () => {
                    const exercise = document.getElementById('reading-exercise');
                    const feedback = document.getElementById('reading-feedback');
                    checkQuizAnswers(exercise, feedback, "Excellent! All answers are correct.", `You got {correct} out of {total} correct. Try again!`);
                };

                const listeningCheckHandler = () => {
                    const exercise = document.getElementById('listening-exercise');
                    const feedback = document.getElementById('listening-feedback');
                    checkQuizAnswers(exercise, feedback, "Perfect! All gaps filled correctly.", `You got {correct} out of {total} correct. Keep trying!`);
                };

                const quizCheckHandler = () => {
                    const exercise = document.getElementById('interactive-quiz-exercise');
                    const feedback = document.getElementById('quiz-feedback');
                    checkQuizAnswers(exercise, feedback, "Great job! All answers are correct.", `You got {correct} out of {total} correct. Give it another go!`);
                };

                const circleQuizCheckHandler = () => {
                    const exercise = document.getElementById('circle-quiz-exercise');
                    const feedback = document.getElementById('circle-quiz-feedback');
                    checkCircleQuizAnswers(exercise, feedback);
                };

                // --- Core Functions ---

                /**
                 * Generic function to check answers for text input quizzes.
                 */
                function checkQuizAnswers(exerciseEl, feedbackEl, successMsg, errorMsgTemplate) {
                    const inputs = exerciseEl.querySelectorAll('input');
                    let correctCount = 0;
                    inputs.forEach(input => {
                        const userAnswer = (input.value.trim().toLowerCase() || 'x');
                        const correctAnswer = input.dataset.answer.toLowerCase();
                        input.classList.remove('correct', 'incorrect');
                        if (userAnswer === correctAnswer) {
                            input.classList.add('correct');
                            correctCount++;
                        } else {
                            input.classList.add('incorrect');
                        }
                    });

                    if (correctCount === inputs.length) {
                        feedbackEl.textContent = successMsg;
                        feedbackEl.className = 'text-center mt-4 font-semibold text-green-600';
                    } else {
                        const errorMsg = errorMsgTemplate.replace('{correct}', correctCount).replace('{total}', inputs.length);
                        feedbackEl.textContent = errorMsg;
                        feedbackEl.className = 'text-center mt-4 font-semibold text-red-600';
                    }
                }

                /**
                 * Function to check answers for the circle/choice quiz.
                 */
                function checkCircleQuizAnswers(exerciseEl, feedbackEl) {
                    const choiceGroups = exerciseEl.querySelectorAll('.choice-group');
                    let correctCount = 0;
                    choiceGroups.forEach(group => {
                        const selected = group.querySelector('.choice.selected');
                        const choices = group.querySelectorAll('.choice');
                        
                        // Reset styles
                        choices.forEach(c => {
                            c.classList.remove('correct-answer', 'incorrect-answer');
                        });

                        if (selected) {
                            if (selected.hasAttribute('data-correct')) {
                                selected.classList.add('correct-answer');
                                correctCount++;
                            } else {
                                selected.classList.add('incorrect-answer');
                            }
                        }
                    });

                    if (correctCount === choiceGroups.length) {
                        feedbackEl.textContent = "Flawless! You got everything right!";
                        feedbackEl.className = 'text-center mt-4 font-semibold text-green-600';
                    } else {
                        feedbackEl.textContent = `You got ${correctCount} out of ${choiceGroups.length} correct. Review the red answers and try again!`;
                        feedbackEl.className = 'text-center mt-4 font-semibold text-red-600';
                    }
                }
                
                /**
                 * Handles clicks within a circle quiz to select an answer.
                 */
                function handleChoiceClick(event) {
                    if (event.target.classList.contains('choice')) {
                        const group = event.target.parentElement;
                        // Deselect other choices in the same group
                        group.querySelectorAll('.choice').forEach(choice => {
                            choice.classList.remove('selected');
                        });
                        // Select the clicked choice
                        event.target.classList.add('selected');
                    }
                }


                /**
                 * Cleans up event listeners for a specific slide.
                 */
                function cleanupSlide(slideIndex) {
                    if (slideIndex === 4) { // Fill the Gaps Quiz
                        const btn = document.getElementById('check-quiz-btn');
                        if (btn) btn.removeEventListener('click', quizCheckHandler);
                    }
                    if (slideIndex === 5) { // Circle the Answer Quiz
                        const btn = document.getElementById('check-circle-quiz-btn');
                        if (btn) btn.removeEventListener('click', circleQuizCheckHandler);
                        const exercise = document.getElementById('circle-quiz-exercise');
                        if(exercise) exercise.removeEventListener('click', handleChoiceClick);
                    }
                    if (slideIndex === 6) { // Reading Practice
                        const btn = document.getElementById('check-reading-btn');
                        if (btn) btn.removeEventListener('click', readingCheckHandler);
                    }
                    if (slideIndex === 7) { // Listening Practice
                        const btn = document.getElementById('check-listening-btn');
                        if (btn) btn.removeEventListener('click', listeningCheckHandler);
                    }
                }

                /**
                 * Sets up event listeners for a specific slide.
                 */
                function setupSlide(slideIndex) {
                    if (slideIndex === 4) { // Fill the Gaps Quiz
                        const btn = document.getElementById('check-quiz-btn');
                        if (btn) btn.addEventListener('click', quizCheckHandler);
                    }
                    if (slideIndex === 5) { // Circle the Answer Quiz
                        const btn = document.getElementById('check-circle-quiz-btn');
                        if (btn) btn.addEventListener('click', circleQuizCheckHandler);
                        const exercise = document.getElementById('circle-quiz-exercise');
                        if(exercise) exercise.addEventListener('click', handleChoiceClick);
                    }
                    if (slideIndex === 6) { // Reading Practice
                        const btn = document.getElementById('check-reading-btn');
                        if (btn) btn.addEventListener('click', readingCheckHandler);
                    }
                    if (slideIndex === 7) { // Listening Practice
                        const btn = document.getElementById('check-listening-btn');
                        if (btn) btn.addEventListener('click', listeningCheckHandler);
                    }
                }

                /**
                 * Main function to display a specific slide.
                 */
                function showSlide(index) {
                    cleanupSlide(currentSlide);
                    currentSlide = index;

                    slides.forEach((slide, i) => {
                        slide.classList.remove('slide-active', 'slide-hidden', 'slide-hidden-left');
                        if (i === currentSlide) {
                            slide.classList.add('slide-active');
                        } else if (i < currentSlide) {
                            slide.classList.add('slide-hidden-left');
                        } else {
                            slide.classList.add('slide-hidden');
                        }
                    });

                    slideCounter.textContent = `${currentSlide + 1} / ${totalSlides}`;
                    prevBtn.disabled = currentSlide === 0;
                    nextBtn.disabled = currentSlide === totalSlides - 1;

                    setupSlide(currentSlide);
                }
                
                // --- Initial Setup ---
                nextBtn.addEventListener('click', () => {
                    if (currentSlide < totalSlides - 1) {
                        showSlide(currentSlide + 1);
                    }
                });

                prevBtn.addEventListener('click', () => {
                    if (currentSlide > 0) {
                        showSlide(currentSlide - 1);
                    }
                });

                showSlide(0);
            });
        })();
    </script>
</body>
</html>

